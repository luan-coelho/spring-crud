<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
  <!--
  ╔══════════════════════════════════════════════════════════════════════════════╗
  ║  UI PAGINATION COMPONENTS                                                     ║
  ║  Uso: <ui:pagination th:replace="~{ui/pagination :: default(page)}"/>        ║
  ╚══════════════════════════════════════════════════════════════════════════════╝
-->

  <!-- ===== Pagination Default ===== -->
  <!--
  Espera um objeto Page do Spring Data:
  - page.number (página atual, 0-based)
  - page.totalPages
  - page.totalElements
  - page.size
  - page.hasPrevious
  - page.hasNext
-->
  <th:block th:fragment="default(page, baseUrl)">
    <nav
      class="flex items-center justify-between border-t border-gray-200 px-4 py-3 dark:border-gray-700 sm:px-6">
      <!-- Info e Mobile Nav -->
      <div class="flex flex-1 justify-between sm:hidden">
        <a
          th:href="${page.hasPrevious ? (baseUrl + '?page=' + (page.number - 1)) : '#'}"
          th:class="${page.hasPrevious} 
          ? 'relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700' 
          : 'relative inline-flex cursor-not-allowed items-center rounded-md border border-gray-200 bg-gray-50 px-4 py-2 text-sm font-medium text-gray-400 dark:border-gray-800 dark:bg-gray-900 dark:text-gray-600'">
          Anterior
        </a>
        <a
          th:href="${page.hasNext ? (baseUrl + '?page=' + (page.number + 1)) : '#'}"
          th:class="${page.hasNext} 
          ? 'relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700' 
          : 'relative ml-3 inline-flex cursor-not-allowed items-center rounded-md border border-gray-200 bg-gray-50 px-4 py-2 text-sm font-medium text-gray-400 dark:border-gray-800 dark:bg-gray-900 dark:text-gray-600'">
          Próxima
        </a>
      </div>

      <!-- Desktop Nav -->
      <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
        <div>
          <p class="text-sm text-gray-700 dark:text-gray-400">
            Mostrando
            <span class="font-medium" th:text="${page.number * page.size + 1}">1</span>
            a
            <span
              class="font-medium"
              th:text="${#numbers.min(page.number * page.size + page.size, page.totalElements)}">
              10
            </span>
            de
            <span class="font-medium" th:text="${page.totalElements}">100</span>
            resultados
          </p>
        </div>
        <div>
          <nav class="isolate inline-flex -space-x-px rounded-md shadow-sm" aria-label="Pagination">
            <!-- Previous -->
            <a
              th:href="${page.hasPrevious ? (baseUrl + '?page=' + (page.number - 1)) : '#'}"
              th:class="${page.hasPrevious} 
              ? 'relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 dark:ring-gray-700 dark:hover:bg-gray-700' 
              : 'relative inline-flex cursor-not-allowed items-center rounded-l-md px-2 py-2 text-gray-300 ring-1 ring-inset ring-gray-300 dark:text-gray-600 dark:ring-gray-700'">
              <span class="sr-only">Anterior</span>
              <svg class="h-5 w-5 fill-current" viewBox="0 0 20 20">
                <path
                  fill-rule="evenodd"
                  d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z"
                  clip-rule="evenodd" />
              </svg>
            </a>

            <!-- Page Numbers -->
            <th:block th:each="i : ${#numbers.sequence(0, page.totalPages - 1)}">
              <a
                th:if="${i == page.number}"
                class="relative z-10 inline-flex items-center bg-brand-500 px-4 py-2 text-sm font-semibold text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-500"
                th:text="${i + 1}">
                1
              </a>
              <a
                th:if="${i != page.number and (i < 3 or i > page.totalPages - 4 or (i >= page.number - 1 and i <= page.number + 1))}"
                th:href="${baseUrl + '?page=' + i}"
                class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 dark:text-gray-300 dark:ring-gray-700 dark:hover:bg-gray-700"
                th:text="${i + 1}">
                1
              </a>
              <!-- Ellipsis -->
              <span
                th:if="${i == 3 and page.number > 4 and page.totalPages > 7}"
                class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 focus:outline-offset-0 dark:text-gray-400 dark:ring-gray-700">
                ...
              </span>
              <span
                th:if="${i == page.totalPages - 4 and page.number < page.totalPages - 5 and page.totalPages > 7}"
                class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 focus:outline-offset-0 dark:text-gray-400 dark:ring-gray-700">
                ...
              </span>
            </th:block>

            <!-- Next -->
            <a
              th:href="${page.hasNext ? (baseUrl + '?page=' + (page.number + 1)) : '#'}"
              th:class="${page.hasNext} 
              ? 'relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 dark:ring-gray-700 dark:hover:bg-gray-700' 
              : 'relative inline-flex cursor-not-allowed items-center rounded-r-md px-2 py-2 text-gray-300 ring-1 ring-inset ring-gray-300 dark:text-gray-600 dark:ring-gray-700'">
              <span class="sr-only">Próxima</span>
              <svg class="h-5 w-5 fill-current" viewBox="0 0 20 20">
                <path
                  fill-rule="evenodd"
                  d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"
                  clip-rule="evenodd" />
              </svg>
            </a>
          </nav>
        </div>
      </div>
    </nav>
  </th:block>

  <!-- ===== Simple Pagination (Previous/Next only) ===== -->
  <th:block th:fragment="simple(page, baseUrl)">
    <nav class="flex items-center justify-between py-4">
      <a
        th:href="${page.hasPrevious ? (baseUrl + '?page=' + (page.number - 1)) : '#'}"
        th:class="${page.hasPrevious} 
        ? 'inline-flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-brand-500 dark:text-gray-300 dark:hover:text-brand-400' 
        : 'inline-flex cursor-not-allowed items-center gap-2 text-sm font-medium text-gray-400 dark:text-gray-600'">
        <svg class="h-5 w-5 fill-current" viewBox="0 0 20 20">
          <path
            fill-rule="evenodd"
            d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z"
            clip-rule="evenodd" />
        </svg>
        Anterior
      </a>
      <span class="text-sm text-gray-500 dark:text-gray-400">
        Página
        <span th:text="${page.number + 1}">1</span>
        de
        <span th:text="${page.totalPages}">10</span>
      </span>
      <a
        th:href="${page.hasNext ? (baseUrl + '?page=' + (page.number + 1)) : '#'}"
        th:class="${page.hasNext} 
        ? 'inline-flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-brand-500 dark:text-gray-300 dark:hover:text-brand-400' 
        : 'inline-flex cursor-not-allowed items-center gap-2 text-sm font-medium text-gray-400 dark:text-gray-600'">
        Próxima
        <svg class="h-5 w-5 fill-current" viewBox="0 0 20 20">
          <path
            fill-rule="evenodd"
            d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"
            clip-rule="evenodd" />
        </svg>
      </a>
    </nav>
  </th:block>

  <!-- ===== Compact Pagination (Numbers only) ===== -->
  <th:block th:fragment="compact(page, baseUrl)">
    <nav class="flex items-center gap-1">
      <th:block th:each="i : ${#numbers.sequence(0, page.totalPages - 1)}">
        <a
          th:if="${i == page.number}"
          class="flex h-8 w-8 items-center justify-center rounded-lg bg-brand-500 text-sm font-medium text-white"
          th:text="${i + 1}">
          1
        </a>
        <a
          th:if="${i != page.number and page.totalPages <= 7}"
          th:href="${baseUrl + '?page=' + i}"
          class="flex h-8 w-8 items-center justify-center rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"
          th:text="${i + 1}">
          1
        </a>
      </th:block>
    </nav>
  </th:block>

  <!-- ===== Load More Button ===== -->
  <th:block th:fragment="loadMore(page, baseUrl)">
    <div th:if="${page.hasNext}" class="flex justify-center py-4">
      <a
        th:href="${baseUrl + '?page=' + (page.number + 1)}"
        class="inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-5 py-2.5 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700">
        Carregar mais
        <svg class="h-4 w-4 fill-current" viewBox="0 0 20 20">
          <path
            fill-rule="evenodd"
            d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
            clip-rule="evenodd" />
        </svg>
      </a>
    </div>
  </th:block>
</html>
